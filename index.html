<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/safari-pinned-tab" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha256-xejo6yLi6vGtAjcMIsY8BHdKsLg7QynVlFMzdQgUuy8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"chenqy9.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.12.3","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="一只热爱生活的程序猿">
<meta property="og:type" content="website">
<meta property="og:title" content="小王子星球">
<meta property="og:url" content="https://chenqy9.github.io/index.html">
<meta property="og:site_name" content="小王子星球">
<meta property="og:description" content="一只热爱生活的程序猿">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="小王子">
<meta property="article:tag" content="全栈，前端，后台，JavaScript，java，css3，html5，Linux，数据库">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://chenqy9.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>小王子星球</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">小王子星球</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">道虽迩，不行不至，<br>事虽小，不为不成。</p>
      <img class="custom-logo-image" src="/uploads/logo.jpeg" alt="小王子星球">
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">40</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">4</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">22</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">小王子</p>
  <div class="site-description" itemprop="description">一只热爱生活的程序猿</div>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/chenqy9" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;chenqy9" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:chenqy9@foxmail.com" title="E-Mail → mailto:chenqy9@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/chenqy9" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chenqy9.github.io/2023/12/25/Create-react-app-%E4%BF%AE%E6%94%B9webapck%E9%85%8D%E7%BD%AE%E5%AF%BC%E5%85%A5%E6%96%87%E4%BB%B6alias/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小王子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小王子星球">
      <meta itemprop="description" content="一只热爱生活的程序猿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 小王子星球">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/12/25/Create-react-app-%E4%BF%AE%E6%94%B9webapck%E9%85%8D%E7%BD%AE%E5%AF%BC%E5%85%A5%E6%96%87%E4%BB%B6alias/" class="post-title-link" itemprop="url">Create react app 修改webapck配置导入文件alias</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-12-25 14:00:21" itemprop="dateCreated datePublished" datetime="2023-12-25T14:00:21+08:00">2023-12-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-22 11:19:44" itemprop="dateModified" datetime="2024-11-22T11:19:44+08:00">2024-11-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">技术文档</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="create-react-app"><a href="#create-react-app" class="headerlink" title="create react app"></a>create react app</h2><p><code>create-react-app</code>是 react 的官方项目脚手架，可以帮我们快速的搭建一个 react 项目。了解 vue 的同学应该知道，vue的官方脚手架是默认支持<code>@</code>到<code>src</code>的绝对路径引用，可以优雅高效的引用其它模块，特别是跨目录，深嵌套的引用。而且vue把webpack的配置文件暴露出来，可以很方便的对webapck进行个性化的配置修改。相比之下，create react app生成的项目，默认还是用相对路径的引入，而且把webpack的配置深度集成到脚本里面，如果需要个性化的修改配置，只能通过<code>react-scripts eject</code>来导出wenpack配置，而且修改之后就只能自己维护了，一些我们不需要修改的react官方默认配置可能就会丢失。我们可以通过以下两个插件来优雅的修改create react app生成的项目配置，以修改导入路径alias为例说明。</p>
<h2 id="react-app-rewired"><a href="#react-app-rewired" class="headerlink" title="react app rewired"></a>react app rewired</h2><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/react-app-rewired">react-app-rewired</a></p>
<ol>
<li>安装插件</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install react-app-rewired --save-dev</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建 <code>config-overrides.js</code></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* config-overrides.js */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">webpack</span>: <span class="keyword">function</span>(<span class="params">config, env</span>) &#123;</span><br><span class="line">    config.<span class="property">resolve</span>.<span class="property">alias</span>[<span class="string">&#x27;@&#x27;</span>] = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">jest</span>: <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      moduleNameMapper = &#123;&#125;,</span><br><span class="line">    &#125; = config;</span><br><span class="line">    config.<span class="property">moduleNameMapper</span> = &#123;</span><br><span class="line">      ...moduleNameMapper,</span><br><span class="line">      <span class="string">&#x27;^@/(.*)$&#x27;</span>: <span class="string">&#x27;&lt;rootDir&gt;/src/$1&#x27;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>修改 <code>react-scripts</code> 的默认npm脚本</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* package.json */</span></span><br><span class="line"></span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-app-rewired start&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-app-rewired build&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-app-rewired test&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;eject&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-scripts eject&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="craco-x2F-craco"><a href="#craco-x2F-craco" class="headerlink" title="@craco&#x2F;craco"></a>@craco&#x2F;craco</h2><p><a target="_blank" rel="noopener" href="https://github.com/dilanx/craco">@craco&#x2F;craco</a></p>
<ol>
<li>安装</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D @craco/craco</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建 <code>craco-config.js</code> 文件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">webpack</span>: &#123;</span><br><span class="line">    <span class="attr">configure</span>: <span class="function">(<span class="params">webpackConfig</span>) =&gt;</span> &#123;</span><br><span class="line">      webpackConfig.<span class="property">resolve</span>.<span class="property">alias</span>[<span class="string">&#x27;@&#x27;</span>] = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> webpackConfig;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">jest</span>: &#123;</span><br><span class="line">    <span class="attr">configure</span>: <span class="function">(<span class="params">jestConfig</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;</span><br><span class="line">        moduleNameMapper = &#123;&#125;,</span><br><span class="line">      &#125; = jestConfig;</span><br><span class="line">      jestConfig.<span class="property">moduleNameMapper</span> = &#123;</span><br><span class="line">        ...moduleNameMapper,</span><br><span class="line">        <span class="string">&#x27;^@/(.*)$&#x27;</span>: <span class="string">&#x27;&lt;rootDir&gt;/src/$1&#x27;</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">return</span> jestConfig;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>修改 <code>react-scripts</code> 的默认npm脚本</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* package.json */</span></span><br><span class="line"></span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;craco start&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;craco build&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;craco test&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;eject&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-scripts eject&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>我们可以通过 <code>react-app-rewired</code> 和 <code>@craco/craco</code> 两个插件优雅的修改 <code>create-react-app</code> 生成的项目配置。两个插件的使用方法都差不多，也都可以实现我们的需求，至于使用哪一个见仁见智。我建议是用<code>@craco/craco</code>，比较新，<code>react-app-rewired</code>最后的更新已经是两年前了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chenqy9.github.io/2023/09/19/js-this-closure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小王子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小王子星球">
      <meta itemprop="description" content="一只热爱生活的程序猿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 小王子星球">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/19/js-this-closure/" class="post-title-link" itemprop="url">Javascript中的this与函数上下文</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-19 17:18:19" itemprop="dateCreated datePublished" datetime="2023-09-19T17:18:19+08:00">2023-09-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-22 11:19:44" itemprop="dateModified" datetime="2024-11-22T11:19:44+08:00">2024-11-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">技术文档</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Javascript中函数运行时的this和上下文是一个重要的知识点，而且很多文章也做了详细的解析。本文不展开原理进行阐述，只总结结论。</p>
<h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><ul>
<li><p>用<code>function</code>定义的函数，运行时的this由调用对象决定，即<code>this</code>指向<code>obj.fn()</code>中的<code>obj</code>，如果无具体的调用方，则为在非严格模式下为global对象，严格模式下为undefined。可通<code>bind</code>，<code>call</code>，<code>apply</code>来绑定运行时的<code>this</code>;</p>
</li>
<li><p>用<code>() =&gt; &#123;&#125;</code>定义的箭头函数，无内部的<code>this</code>，由定义时的外部<code>this</code>决定，不可用<code>bind</code>，<code>call</code>，<code>apply</code>来绑定运行时的<code>this</code>;</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">testFn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">testNarrowFn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = &#123; <span class="attr">name</span>: <span class="string">&#x27;a&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> b = &#123; <span class="attr">name</span>: <span class="string">&#x27;b&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line">a.<span class="property">testFn</span> = testFn;</span><br><span class="line"></span><br><span class="line">b.<span class="property">testFn</span> = a.<span class="property">testFn</span>;</span><br><span class="line">b.<span class="property">testNarrowFn</span> = testNarrowFn;</span><br><span class="line"></span><br><span class="line">a.<span class="property">testNarrowFn</span> = b.<span class="property">testNarrowFn</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// window(web)/undefined(node)</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">testFn</span>(); <span class="comment">// window(web)/undefined(node)</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">testNarrowFn</span>(); <span class="comment">// window(web)/undefined(node)</span></span><br><span class="line"></span><br><span class="line">a.<span class="title function_">testFn</span>(); <span class="comment">// &#123;name: &#x27;a&#x27;, testFn: ƒ, testNarrowFn: ƒ&#125;</span></span><br><span class="line"></span><br><span class="line">b.<span class="title function_">testFn</span>(); <span class="comment">// &#123;name: &#x27;b&#x27;, testFn: ƒ, testNarrowFn: ƒ&#125;</span></span><br><span class="line"></span><br><span class="line">b.<span class="title function_">testNarrowFn</span>(); <span class="comment">// window(web)/undefined(node)</span></span><br><span class="line"></span><br><span class="line">a.<span class="title function_">testNarrowFn</span>(); <span class="comment">// window(web)/undefined(node)</span></span><br></pre></td></tr></table></figure>

<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>函数运行时的作用域由定义时所在的作用域决定，和调用的位置无关。Javascript中有三个作用域：全局作用域，块级作用域(<code>&#123;&#125;</code>)，函数作用域。函数运行的作用域层级为：自身作用域 –&gt; 块级作用域（如有）–&gt; 函数作用域（父级函数）–&gt; 全局作用域。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fnArr = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outerFn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> outer = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i += <span class="number">1</span>) &#123;</span><br><span class="line">    outer += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">innerFun</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(i, outer);</span><br><span class="line">    &#125;</span><br><span class="line">    fnArr[i] = innerFun;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">outerFn</span>();</span><br><span class="line"></span><br><span class="line">fnArr[<span class="number">0</span>](); <span class="comment">// 0 3</span></span><br><span class="line">fnArr[<span class="number">1</span>](); <span class="comment">// 1 3</span></span><br><span class="line">fnArr[<span class="number">2</span>](); <span class="comment">// 2 3</span></span><br></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://javascript.info/object-methods">Object methods, “this”</a></li>
<li><a target="_blank" rel="noopener" href="https://javascript.info/closure">Variable scope, closure</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chenqy9.github.io/2023/09/05/defineProperty-vs-Proxy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小王子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小王子星球">
      <meta itemprop="description" content="一只热爱生活的程序猿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 小王子星球">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/05/defineProperty-vs-Proxy/" class="post-title-link" itemprop="url">defineProperty vs Proxy</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-05 14:45:04" itemprop="dateCreated datePublished" datetime="2023-09-05T14:45:04+08:00">2023-09-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-22 11:19:44" itemprop="dateModified" datetime="2024-11-22T11:19:44+08:00">2024-11-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">技术文档</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="defineProperty"><a href="#defineProperty" class="headerlink" title="defineProperty"></a>defineProperty</h2><p><code>defineProperty</code>是ES6之前一种定义对象属性的语法，具体语法为<code>Object.defineProperty(obj, prop, descriptor)</code></p>
<ul>
<li>操作的粒度是对象的属性，在原有的对象上进行修改</li>
<li>无法通过set监听数组的length变化，因为数组length属性的Configurable是false</li>
<li>vue2.0通过defineProperty进行对象的改造和监听，实现响应式：  <ol>
<li>需要遍历对象的属性，对比vue3.0的proxy效率和性能低；  </li>
<li>无法监听数组的length属性和具体的某个index值变化，需要改造原生的数组方法；</li>
<li>无法动态的添加响应式的属性，需要用vue提供的set方法；</li>
<li>无法监听子对象的属性，需要深度遍历。</li>
</ol>
</li>
</ul>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><p><code>Proxy</code>是ES6新增的，用于代理一个对象属性和操作的语法，具体语法为<code>new Proxy(target, handler)</code></p>
<ul>
<li>操作的粒度是整个对象，无需修改原有的对象属性</li>
<li>可以更方便，高效的拦截到对象的操作，包括数组的length属性和某个index的变化</li>
</ul>
<h2 id="联系我"><a href="#联系我" class="headerlink" title="联系我"></a>联系我</h2><ul>
<li><a href="mailto:chenqy9@foxmail.com">E-mail</a></li>
<li><a href="https://chenqy9.github.io/">个人博客</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chenqy9.github.io/2023/08/16/%E8%A7%A3%E5%86%B3-toBeInTheDocument-does-not-exist/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小王子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小王子星球">
      <meta itemprop="description" content="一只热爱生活的程序猿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 小王子星球">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/08/16/%E8%A7%A3%E5%86%B3-toBeInTheDocument-does-not-exist/" class="post-title-link" itemprop="url">解决 toBeInTheDocument does not exist</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-08-16 17:19:54" itemprop="dateCreated datePublished" datetime="2023-08-16T17:19:54+08:00">2023-08-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-22 11:19:44" itemprop="dateModified" datetime="2024-11-22T11:19:44+08:00">2024-11-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%97%AE%E9%A2%98%E6%8A%80%E5%B7%A7/" itemprop="url" rel="index"><span itemprop="name">问题技巧</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>用<code>pnpm</code>安装<code>create-react-app</code>创建的<code>typescript</code>模板应用依赖，执行<code>pnpm run start</code>会出现错误<code>Property &#39;toBeInTheDocument&#39; does not exist on type &#39;Matchers&lt;HTMLElement&gt;&#39;</code>。  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pnpm dlx create-react-app --template typescript</span><br><span class="line"></span><br><span class="line">pnpm i</span><br><span class="line"></span><br><span class="line">pnpm run start</span><br></pre></td></tr></table></figure>

<h2 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h2><p>问题的原因是<code>pnpm</code> V7以上的版本默认不提升<code>@types</code>的依赖，导致<code>typescript</code>编译时在<code>node_modules/@types</code>目录下找不到<code>testing-library/jest-dom</code>的类型定义，因此报错。参考链接：  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pnpm/pnpm/issues/4920#issuecomment-1225961351">https://github.com/pnpm/pnpm/issues/4920#issuecomment-1225961351</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/pnpm/pnpm/pull/4459">https://github.com/pnpm/pnpm/pull/4459</a></li>
</ul>
<h2 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h2><p>修改<code>.npmrc</code>配置，把<code>types</code>的依赖提升至根目录，然后重新安装依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ~/.npmrc</span></span><br><span class="line">public-hoist-pattern[]=*types*</span><br></pre></td></tr></table></figure>

<p>参考：<a target="_blank" rel="noopener" href="https://pnpm.io/zh/npmrc#public-hoist-pattern">public-hoist-pattern</a></p>
<h2 id="联系我"><a href="#联系我" class="headerlink" title="联系我"></a>联系我</h2><ul>
<li><a href="mailto:chenqy9@foxmail.com">E-mail</a></li>
<li><a href="https://chenqy9.github.io/">个人博客</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chenqy9.github.io/2023/08/07/%E5%89%8D%E7%AB%AFweb%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小王子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小王子星球">
      <meta itemprop="description" content="一只热爱生活的程序猿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 小王子星球">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/08/07/%E5%89%8D%E7%AB%AFweb%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/" class="post-title-link" itemprop="url">前端web性能指标</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-08-07 15:19:41" itemprop="dateCreated datePublished" datetime="2023-08-07T15:19:41+08:00">2023-08-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-22 11:19:44" itemprop="dateModified" datetime="2024-11-22T11:19:44+08:00">2024-11-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">技术文档</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a target="_blank" rel="noopener" href="https://web.dev/lcp/">Largest Contentful Paint (LCP)</a> ：最大内容绘制，测量加载性能。为了提供良好的用户体验，LCP 应在页面首次开始加载后的2.5 秒内发生。</li>
<li><a target="_blank" rel="noopener" href="https://web.dev/fid/">First Input Delay (FID)</a> ：首次输入延迟，测量交互性。为了提供良好的用户体验，页面的 FID 应为100 毫秒或更短。</li>
<li><a target="_blank" rel="noopener" href="https://web.dev/cls/">Cumulative Layout Shift (CLS)</a> ：累积布局偏移，测量视觉稳定性。为了提供良好的用户体验，页面的 CLS 应保持在 0.1. 或更少。</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://web.dev/i18n/zh/vitals/">Web 指标</a></li>
</ul>
<h2 id="联系我"><a href="#联系我" class="headerlink" title="联系我"></a>联系我</h2><ul>
<li><a href="mailto:chenqy9@foxmail.com">E-mail</a></li>
<li><a href="https://chenqy9.github.io/">个人博客</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chenqy9.github.io/2023/08/03/%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AAPromise/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小王子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小王子星球">
      <meta itemprop="description" content="一只热爱生活的程序猿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 小王子星球">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/08/03/%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AAPromise/" class="post-title-link" itemprop="url">手写实现一个Promise</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-08-03 18:09:32" itemprop="dateCreated datePublished" datetime="2023-08-03T18:09:32+08:00">2023-08-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-22 11:19:44" itemprop="dateModified" datetime="2024-11-22T11:19:44+08:00">2024-11-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">技术文档</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Promise的定义"><a href="#Promise的定义" class="headerlink" title="Promise的定义"></a>Promise的定义</h2><p><code>Promise</code>是ES6提供的一个用于解决异步回调地狱的语法，标准的定义如下：</p>
<ul>
<li>有三种状态：pending，fulfilled，rejected；</li>
<li>构造函数传入一个执行函数，该函数有两个参数，resolve，成功的回调，reject，失败的回调；</li>
<li>包含一个then函数，支持链式调用；</li>
<li>包含一个catch函数，用户捕获promise的异常</li>
</ul>
<h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stateMap = &#123;</span><br><span class="line">  <span class="attr">PENDING</span>: <span class="string">&#x27;pending&#x27;</span>,</span><br><span class="line">  <span class="attr">FULFILLED</span>: <span class="string">&#x27;fulfilled&#x27;</span>,</span><br><span class="line">  <span class="attr">REJECTED</span>: <span class="string">&#x27;rejected&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">executor</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">id</span> = id;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = stateMap.<span class="property">PENDING</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">value</span> = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">reason</span> = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fulfillCallbackList</span> = [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rejectCallbackList</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">resolve</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span> !== stateMap.<span class="property">PENDING</span>) <span class="keyword">return</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">state</span> = stateMap.<span class="property">FULFILLED</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">value</span> = value;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">fulfillCallbackList</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">callback</span>) =&gt;</span> <span class="title function_">callback</span>(<span class="variable language_">this</span>.<span class="property">value</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">reject</span> = (<span class="params">reason</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span> !== stateMap.<span class="property">PENDING</span>) <span class="keyword">return</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">state</span> = stateMap.<span class="property">REJECTED</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">reason</span> = reason;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rejectCallbackList</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">callback</span>) =&gt;</span> <span class="title function_">callback</span>(<span class="variable language_">this</span>.<span class="property">reason</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="title function_">executor</span>(resolve, reject);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="title function_">reject</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">then</span>(<span class="params">onFulFill, onReject</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> thenPromise = <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span> === stateMap.<span class="property">FULFILLED</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> value = <span class="title function_">onFulFill</span>(<span class="variable language_">this</span>.<span class="property">value</span>);</span><br><span class="line">          <span class="title function_">resolve</span>(value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span> === stateMap.<span class="property">REJECTED</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> reason = <span class="title function_">onReject</span>(<span class="variable language_">this</span>.<span class="property">reason</span>);</span><br><span class="line">          <span class="title function_">reject</span>(reason);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fulfillCallbackList</span>.<span class="title function_">push</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> value = <span class="title function_">onFulFill</span>(<span class="variable language_">this</span>.<span class="property">value</span>);</span><br><span class="line">            <span class="title function_">resolve</span>(value);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(error);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">rejectCallbackList</span>.<span class="title function_">push</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> reason = <span class="title function_">onReject</span>(<span class="variable language_">this</span>.<span class="property">reason</span>);</span><br><span class="line">            <span class="title function_">resolve</span>(reason);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(error);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> thenPromise;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">catch</span>(rejectCallback) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(<span class="literal">null</span>, rejectCallback);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">PromiseType = <span class="built_in">Promise</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">PromiseType</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> num = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>;</span><br><span class="line">      <span class="keyword">if</span> (num &lt; <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(num);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="string">&#x27;num is not less than 5&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">  </span><br><span class="line">   promise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fulfill-1&#x27;</span>, value);</span><br><span class="line">      value = <span class="string">`then1-<span class="subst">$&#123;value&#125;</span>`</span>;</span><br><span class="line">    &#125;,<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reject-1&#x27;</span>, reason);</span><br><span class="line">      reason = <span class="string">`then1-<span class="subst">$&#123;reason&#125;</span>`</span>;</span><br><span class="line">      <span class="keyword">return</span> reason;</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fulfill-2&#x27;</span>, value);</span><br><span class="line">      value = <span class="string">`then2-<span class="subst">$&#123;value&#125;</span>`</span>;</span><br><span class="line">    &#125;, <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reject-2&#x27;</span>, reason);</span><br><span class="line">      reason = <span class="string">`then2-<span class="subst">$&#123;reason&#125;</span>`</span>;</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise&#x27;</span>, promise, value);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="title class_">Promise</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="title class_">MyPromise</span>);</span><br></pre></td></tr></table></figure>

<h2 id="联系我"><a href="#联系我" class="headerlink" title="联系我"></a>联系我</h2><ul>
<li><a href="mailto:chenqy9@foxmail.com">E-mail</a></li>
<li><a href="https://chenqy9.github.io/">个人博客</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chenqy9.github.io/2023/08/02/%E8%A7%A3%E5%86%B3Mac%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E7%9A%84%E2%80%9C%E5%B7%B2%E6%8D%9F%E5%9D%8F%EF%BC%8C%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80%E3%80%82%20%E6%82%A8%E5%BA%94%E8%AF%A5%E5%B0%86%E5%AE%83%E7%A7%BB%E5%88%B0%E5%BA%9F%E7%BA%B8%E7%AF%93%E2%80%9D%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小王子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小王子星球">
      <meta itemprop="description" content="一只热爱生活的程序猿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 小王子星球">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/08/02/%E8%A7%A3%E5%86%B3Mac%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E7%9A%84%E2%80%9C%E5%B7%B2%E6%8D%9F%E5%9D%8F%EF%BC%8C%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80%E3%80%82%20%E6%82%A8%E5%BA%94%E8%AF%A5%E5%B0%86%E5%AE%83%E7%A7%BB%E5%88%B0%E5%BA%9F%E7%BA%B8%E7%AF%93%E2%80%9D%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">解决Mac安装软件的“已损坏，无法打开。 您应该将它移到废纸篓”问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-08-02 14:15:04" itemprop="dateCreated datePublished" datetime="2023-08-02T14:15:04+08:00">2023-08-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-22 11:19:44" itemprop="dateModified" datetime="2024-11-22T11:19:44+08:00">2024-11-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%97%AE%E9%A2%98%E6%8A%80%E5%B7%A7/" itemprop="url" rel="index"><span itemprop="name">问题技巧</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="一、开启允许任何源"><a href="#一、开启允许任何源" class="headerlink" title="一、开启允许任何源"></a>一、开启允许任何源</h2><p>打开终端【启动台】-&gt; 【其它】-&gt; 【终端】，输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo spctl  --master-disable</span><br></pre></td></tr></table></figure>

<p>然后回车，继续输入密码，然后回车。</p>
<h2 id="二、发现还是显示“已损坏，无法打开。-您应该将它移到废纸篓”"><a href="#二、发现还是显示“已损坏，无法打开。-您应该将它移到废纸篓”" class="headerlink" title="二、发现还是显示“已损坏，无法打开。 您应该将它移到废纸篓”"></a>二、发现还是显示“已损坏，无法打开。 您应该将它移到废纸篓”</h2><p>在终端输入以下命令，其中具体的软件路径替换成你想要打开的软件路径，按回车输入秘密即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xattr -r -d com.apple.quarantine /Applications/xxxx.app</span><br></pre></td></tr></table></figure>


<h2 id="联系我"><a href="#联系我" class="headerlink" title="联系我"></a>联系我</h2><ul>
<li><a href="mailto:chenqy9@foxmail.com">E-mail</a></li>
<li><a href="https://chenqy9.github.io/">个人博客</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chenqy9.github.io/2023/08/02/%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84markdown%E5%88%B0html%E7%9A%84%E8%A7%A3%E6%9E%90%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小王子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小王子星球">
      <meta itemprop="description" content="一只热爱生活的程序猿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 小王子星球">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/08/02/%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84markdown%E5%88%B0html%E7%9A%84%E8%A7%A3%E6%9E%90%E5%99%A8/" class="post-title-link" itemprop="url">写一个简单的markdown到html的解析器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-08-02 10:23:46" itemprop="dateCreated datePublished" datetime="2023-08-02T10:23:46+08:00">2023-08-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-22 11:19:44" itemprop="dateModified" datetime="2024-11-22T11:19:44+08:00">2024-11-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">技术文档</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="markdown"><a href="#markdown" class="headerlink" title="markdown"></a>markdown</h2><p>markdown是一种方便快捷的基于标签的文本格式化语法，类似于HTML超文本标志语言。事实上，很多markdown的解析器就是把markdown转换成html来显示的，特别是web端的markdown编辑器，基本上主流的开源库比如<a target="_blank" rel="noopener" href="https://github.com/markedjs/marked">marked</a>都是这样实现的。下面我们自己来实现一个简单的markdown到html的解析器。</p>
<h2 id="markdown标签"><a href="#markdown标签" class="headerlink" title="markdown标签"></a>markdown标签</h2><p>首先，我们来看看markdown常用的标签及语义，对应的html标签，如下所示：</p>
<table>
<thead>
<tr>
<th>markdown 标签</th>
<th>语义</th>
<th>html标签</th>
</tr>
</thead>
<tbody><tr>
<td># ~ ######</td>
<td>标题</td>
<td>h1 ~ h6</td>
</tr>
<tr>
<td>*text*</td>
<td>斜体</td>
<td>em</td>
</tr>
<tr>
<td>**text**</td>
<td>加粗</td>
<td>strong</td>
</tr>
<tr>
<td>`text`</td>
<td>高亮</td>
<td>a</td>
</tr>
<tr>
<td>[text](href)</td>
<td>链接</td>
<td>a</td>
</tr>
</tbody></table>
<h2 id="markdown转html"><a href="#markdown转html" class="headerlink" title="markdown转html"></a>markdown转html</h2><p>实现思路：  </p>
<ol>
<li>写markdown标签的正则表达式和对应的html模板规则映射表</li>
<li>循环规则的正则进行正则匹配的字符串替换</li>
</ol>
<p>实现代码如下：  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rules = [</span><br><span class="line">  <span class="comment">// header rules</span></span><br><span class="line">  [<span class="regexp">/#&#123;6&#125;\s?([^\n]+)/g</span>, <span class="string">&quot;&lt;h6&gt;$1&lt;/h6&gt;&quot;</span>],</span><br><span class="line">  [<span class="regexp">/#&#123;5&#125;\s?([^\n]+)/g</span>, <span class="string">&quot;&lt;h5&gt;$1&lt;/h5&gt;&quot;</span>],</span><br><span class="line">  [<span class="regexp">/#&#123;4&#125;\s?([^\n]+)/g</span>, <span class="string">&quot;&lt;h4&gt;$1&lt;/h4&gt;&quot;</span>],</span><br><span class="line">  [<span class="regexp">/#&#123;3&#125;\s?([^\n]+)/g</span>, <span class="string">&quot;&lt;h3&gt;$1&lt;/h3&gt;&quot;</span>],</span><br><span class="line">  [<span class="regexp">/#&#123;2&#125;\s?([^\n]+)/g</span>, <span class="string">&quot;&lt;h2&gt;$1&lt;/h2&gt;&quot;</span>],</span><br><span class="line">  [<span class="regexp">/#&#123;1&#125;\s?([^\n]+)/g</span>, <span class="string">&quot;&lt;h1&gt;$1&lt;/h1&gt;&quot;</span>],</span><br><span class="line"></span><br><span class="line">  <span class="comment">//bold, italics</span></span><br><span class="line">  [<span class="regexp">/\*\*\s?([^\n]+)\*\*/g</span>, <span class="string">&quot;&lt;strong&gt;$1&lt;/strong&gt;&quot;</span>],</span><br><span class="line">  [<span class="regexp">/\*\s?([^\n]+)\*/g</span>, <span class="string">&quot;&lt;em&gt;$1&lt;/em&gt;&quot;</span>],</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//links</span></span><br><span class="line">  [</span><br><span class="line">    <span class="regexp">/\[([^\]]+)\]\(([^)]+)\)/g</span>,</span><br><span class="line">    <span class="string">&#x27;&lt;a href=&quot;$2&quot;&gt;$1&lt;/a&gt;&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">//highlights</span></span><br><span class="line">  [</span><br><span class="line">    <span class="regexp">/(`)(\s?[^\n,]+\s?)(`)/g</span>,</span><br><span class="line">    <span class="string">&#x27;&lt;a style=&quot;background-color:grey;color:black;text-decoration: none;border-radius: 3px;padding:0 2px;&quot;&gt;$2&lt;/a&gt;&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">markdown2html</span>(<span class="params">markdown = <span class="string">&#x27;&#x27;</span></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> html = markdown;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    rules.<span class="title function_">forEach</span>(<span class="function">(<span class="params">[rule, template]</span>) =&gt;</span> &#123;</span><br><span class="line">      html = html.<span class="title function_">replace</span>(rule, template);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;转换失败：&#x27;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> html;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">markdown2html</span>(<span class="string">`</span></span><br><span class="line"><span class="string"># heading1</span></span><br><span class="line"><span class="string">## heading2</span></span><br><span class="line"><span class="string">### heading3</span></span><br><span class="line"><span class="string">#### heading4</span></span><br><span class="line"><span class="string">##### heading5</span></span><br><span class="line"><span class="string">###### heading6</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**strong**</span></span><br><span class="line"><span class="string">*em*</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[百度](https://www.baidu.com)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">\`highlight\`</span></span><br><span class="line"><span class="string">`</span>));</span><br></pre></td></tr></table></figure>

<h2 id="联系我"><a href="#联系我" class="headerlink" title="联系我"></a>联系我</h2><ul>
<li><a href="mailto:chenqy9@foxmail.com">E-mail</a></li>
<li><a href="https://chenqy9.github.io/">个人博客</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chenqy9.github.io/2023/07/27/XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小王子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小王子星球">
      <meta itemprop="description" content="一只热爱生活的程序猿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 小王子星球">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/07/27/XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB/" class="post-title-link" itemprop="url">XSS跨站脚本攻击</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-07-27 16:07:51" itemprop="dateCreated datePublished" datetime="2023-07-27T16:07:51+08:00">2023-07-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-22 11:19:44" itemprop="dateModified" datetime="2024-11-22T11:19:44+08:00">2024-11-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">技术文档</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>跨站脚本攻击（Cross-Site Scripting，简称 XSS）是一种常见的网络攻击方式，攻击者通过在网页中注入恶意脚本，从而获取用户的敏感信息或者控制用户的浏览器。XSS 攻击的危害和影响非常大，例如窃取用户的账号密码、篡改网页内容、发起 CSRF 攻击等，因此需要引起足够的重视。</p>
<p>在 2018 年，Facebook 曾经因为一个 XSS 漏洞而泄露了 5000 万用户的个人信息，这个事件引起了广泛的关注和讨论。这个事件也说明了 XSS 攻击的危害和影响有多么严重。</p>
<h2 id="XSS-的类型"><a href="#XSS-的类型" class="headerlink" title="XSS 的类型"></a>XSS 的类型</h2><p>XSS 攻击可以分为三种类型：</p>
<ul>
<li>存储型 XSS，存储型 XSS 攻击是指攻击者将恶意脚本存储在服务器端，当用户访问包含恶意脚本的页面时，恶意脚本会被执行。</li>
<li>反射型 XSS，反射型 XSS 攻击是指攻击者将恶意脚本作为参数传递给服务器，服务器将恶意脚本反射回用户的浏览器，从而执行恶意脚本。</li>
<li>基于 DOM 的 XSS。基于 DOM 的 XSS 攻击是指攻击者利用浏览器的 DOM 解析机制，通过修改页面的 DOM 结构来执行恶意脚本。</li>
</ul>
<h2 id="XSS-的攻击方式"><a href="#XSS-的攻击方式" class="headerlink" title="XSS 的攻击方式"></a>XSS 的攻击方式</h2><p>攻击者可以通过多种方式利用 XSS 攻击漏洞，例如在表单中注入恶意脚本、在 URL 中注入恶意脚本、在 Cookie 中注入恶意脚本等。攻击者还可以通过构造恶意脚本来实现各种攻击目的，例如窃取用户的敏感信息、篡改网页内容、发起 CSRF 攻击等。</p>
<h2 id="预防-XSS-攻击"><a href="#预防-XSS-攻击" class="headerlink" title="预防 XSS 攻击"></a>预防 XSS 攻击</h2><p>为了预防 XSS 攻击，我们可以采取以下措施：  </p>
<ul>
<li>输入验证和过滤：对用户输入的数据进行验证和过滤，防止恶意脚本被注入到网页中。例如，可以使用正则表达式过滤掉 HTML 标签和 JavaScript 代码。</li>
<li>输出编码和转义：对输出到网页中的数据进行编码和转义，防止恶意脚本被执行。例如，可以使用 HTML 实体编码和 JavaScript 转义。</li>
<li>使用 Content Security Policy（CSP）：CSP 是一种安全策略，可以限制网页中可以执行的脚本和资源，从而有效地防止 XSS 攻击。例如，可以设置只允许加载来自特定域名的脚本和资源。</li>
</ul>
<h2 id="实例分析"><a href="#实例分析" class="headerlink" title="实例分析"></a>实例分析</h2><p>假设我们有一个简单的博客应用，用户可以在博客中发表文章和评论。我们来看一下如何防止 XSS 攻击。</p>
<h3 id="输入验证和过滤"><a href="#输入验证和过滤" class="headerlink" title="输入验证和过滤"></a>输入验证和过滤</h3><p>我们可以对用户输入的数据进行验证和过滤，例如过滤掉 HTML 标签和 JavaScript 代码。这样可以防止攻击者在评论中注入恶意脚本。</p>
<p>例如，我们可以使用 Node.js 的 escape-html 模块对用户输入的数据进行编码，将特殊字符转换为 HTML 实体。这样可以防止恶意脚本被执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> escapeHtml = <span class="built_in">require</span>(<span class="string">&#x27;escape-html&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 过滤用户输入的评论内容</span></span><br><span class="line"><span class="keyword">const</span> comment = escapeHtml(req.<span class="property">body</span>.<span class="property">comment</span>);</span><br></pre></td></tr></table></figure>

<h3 id="输出编码和转义"><a href="#输出编码和转义" class="headerlink" title="输出编码和转义"></a>输出编码和转义</h3><p>我们可以对输出到网页中的数据进行编码和转义，例如使用 HTML 实体编码和 JavaScript 转义。这样可以防止恶意脚本被执行。</p>
<p>例如，我们可以使用 JavaScript 的 encodeURIComponent() 函数对用户输入的数据进行编码，将特殊字符转换为 URL 编码。这样可以防止恶意脚本被注入到 URL 中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输出评论内容到网页中</span></span><br><span class="line"><span class="keyword">var</span> comment = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">comment.<span class="property">innerHTML</span> = <span class="built_in">encodeURIComponent</span>(data.<span class="property">comment</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;comments&#x27;</span>).<span class="title function_">appendChild</span>(comment);</span><br></pre></td></tr></table></figure>

<h3 id="Content-Security-Policy（CSP）"><a href="#Content-Security-Policy（CSP）" class="headerlink" title="Content Security Policy（CSP）"></a>Content Security Policy（CSP）</h3><p>我们可以在网页中添加 CSP 头，限制网页中可以执行的脚本和资源。例如，我们可以设置只允许加载来自特定域名的脚本和资源。</p>
<p>例如，我们可以在网页的 HTTP 头中添加 CSP 头，限制只允许加载来自 example.com 域名的脚本和资源。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Content</span>-<span class="title class_">Security</span>-<span class="title class_">Policy</span>: <span class="keyword">default</span>-src <span class="string">&#x27;self&#x27;</span>; script-src <span class="string">&#x27;self&#x27;</span> example.<span class="property">com</span></span><br></pre></td></tr></table></figure>

<p>这样可以有效地防止 XSS 攻击。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>XSS 攻击是一种常见的网络攻击方式，攻击者可以通过注入恶意脚本来获取用户的敏感信息或者控制用户的浏览器。为了预防 XSS 攻击，我们可以采取多种措施，例如输入验证和过滤、输出编码和转义、使用 Content Security Policy（CSP）等。在开发网页应用时，我们应该时刻关注 XSS 攻击的风险，并采取相应的安全措施。  </p>
<p>如果你想深入了解 XSS 攻击和预防措施，可以参考以下资料：  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html">OWASP XSS Prevention Cheat Sheet</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">Content Security Policy (CSP)</a></li>
<li><a target="_blank" rel="noopener" href="https://portswigger.net/web-security/cross-site-scripting">Cross-site Scripting</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chenqy9.github.io/2023/07/27/innerHtml-innerText-textContent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小王子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小王子星球">
      <meta itemprop="description" content="一只热爱生活的程序猿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 小王子星球">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/07/27/innerHtml-innerText-textContent/" class="post-title-link" itemprop="url">innerHTML innerText textContent对比</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-07-27 15:16:09" itemprop="dateCreated datePublished" datetime="2023-07-27T15:16:09+08:00">2023-07-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-22 11:19:44" itemprop="dateModified" datetime="2024-11-22T11:19:44+08:00">2024-11-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">技术文档</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="innerHTML"><a href="#innerHTML" class="headerlink" title="innerHTML"></a>innerHTML</h2><p><code>innerHTML</code>获取或设置元素的所有内部HTML内容，包括文本和HTML标签，可以理解为元素内部的HTML代码。  </p>
<p><strong>测试代码：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 隐藏部分文本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.hidden</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 测试的HTML内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">  this is <span class="tag">&lt;<span class="name">strong</span>&gt;</span>parent<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> text</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">    hello!</span><br><span class="line">    how are you? <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    this is<span class="symbol">&amp;nbsp;</span>child text</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;hidden&quot;</span>&gt;</span>this is hidden content by css from child<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> parentEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;parent&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(parentEl.<span class="property">innerHTML</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong>  </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">this is &lt;strong&gt;parent&lt;/strong&gt; text</span><br><span class="line">&lt;div id=&quot;child&quot;&gt;</span><br><span class="line">  hello!</span><br><span class="line">  how are you? &lt;span&gt;&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">  &lt;br&gt;</span><br><span class="line">  this is&amp;nbsp;child text</span><br><span class="line">  &lt;p class=&quot;hidden&quot;&gt;this is hidden content by css from child&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h2 id="innerText"><a href="#innerText" class="headerlink" title="innerText"></a>innerText</h2><p><code>innerText</code>获取或设置元素的<em><strong>可见</strong></em>文本内容，不包含HTML标签和隐藏不可见的文本内容。如下所示，用css隐藏及<code>\n</code>等不显示的内容不会返回。  </p>
<p><strong>测试代码：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 隐藏部分文本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.hidden</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 测试的HTML内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">  this is <span class="tag">&lt;<span class="name">strong</span>&gt;</span>parent<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> text</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">    hello!</span><br><span class="line">    how are you? <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    this is<span class="symbol">&amp;nbsp;</span>child text</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;hidden&quot;</span>&gt;</span>this is hidden content by css from child<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> parentEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;parent&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(parentEl.<span class="property">innerText</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong>  </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this is parent text</span><br><span class="line">hello! how are you?</span><br><span class="line">this is child text</span><br></pre></td></tr></table></figure>

<h2 id="textContent"><a href="#textContent" class="headerlink" title="textContent"></a>textContent</h2><p><code>textContent</code>获取或设置元素的所有文本内容，包括换行、空格、css隐藏的内容等，不包括HTML标签。  </p>
<p><strong>测试代码：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 隐藏部分文本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.hidden</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 测试的HTML内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">  this is <span class="tag">&lt;<span class="name">strong</span>&gt;</span>parent<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> text</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">    hello!</span><br><span class="line">    how are you? <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    this is<span class="symbol">&amp;nbsp;</span>child text</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;hidden&quot;</span>&gt;</span>this is hidden content by css from child<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> parentEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;parent&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(parentEl.<span class="property">textContent</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong>  </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">this is parent text</span><br><span class="line"></span><br><span class="line">  hello!</span><br><span class="line">  how are you? </span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  this is child text</span><br><span class="line">  this is hidden content by css from child</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小王子</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
